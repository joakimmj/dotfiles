set -g mouse on
set -g escape-time 0
set -g history-limit 1000000
set -g set-clipboard on
set -g default-terminal "tmux-256color"
set -as terminal-overrides ',xterm-256color:Tc'
set -g default-terminal "${TERM}"
set -g bell-action none
set -g detach-on-destroy off
set -g mode-keys vi
set -g status-keys vi
set -g status-position top
set -g status on
set -g status-style "bg=#2E3434,fg=#6B7A78"
setw -g window-status-style "fg=#8FA7A3,bg=#2E3434"
setw -g window-status-format " #I:#W "
setw -g window-status-current-style "fg=#2E3434,bg=#E3A36F"
setw -g window-status-current-format " #I:#W "
set -g status-left "#[fg=#7EC1AE][#S] #(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD)#[default]"
set -g status-left-length 80
set -g status-justify centre
set -g base-index 1
set -g renumber-windows on
set -g status-right "#[fg=#8FC7B7][#{=21:pane_index}:#{=21:pane_current_command}] #[fg=#AFC3BE]%Y-%m-%d %H:%M "
set -g status-right-length 40
set -g message-style "bg=#3A4141,fg=#DCE8E5"
set -g message-command-style "bg=#3A4141,fg=#FFD7A0"
setw -g mode-style "fg=#E3A36F,bg=#3F4A4A"
set -g pane-border-style "fg=#3A4141"
set -g pane-active-border-style "fg=#7EC1AE"
setw -g mode-style "fg=#2E3434,bg=#C97A3D"
set-option -g status-interval 10
bind-key -T prefix -N "Split window vertically" '"' split-window -v -c '#{pane_current_path}'
bind-key -T prefix -N "Split window horizontally" '%' split-window -h -c '#{pane_current_path}'
bind-key -T prefix -N "Create new window" c new-window -c '#{pane_current_path}'
#bind-key -T prefix -N "Kill the current window" & kill-window
#bind-key -T prefix -N "Kill the current pane" x kill-pane
bind-key -T prefix -N "List all key bindings" ? display-popup -T "[ Key Bindings ]" -S "fg=#E3A36F" -E "(echo 'My keys'; tmux list-keys -N -T my-keys -P 'C-a '; printf '\nCheatsheets\n'; tmux list-keys -N -T cheatsheets -P 'C-a c '; printf '\nLayouts\n'; tmux list-keys -N -T my-layouts -P 'C-a l '; printf '\nBuilt in\n'; tmux list-keys -N) | less"
bind-key -T prefix -r -N "Select the previously current window" ^ last-window
bind-key -T prefix -r -N "Select the pane above the active pane" k select-pane -U
bind-key -T prefix -r -N "Select the pane below the active pane" j select-pane -D
bind-key -T prefix -r -N "Select the pane to the right of the active pane" h select-pane -L
bind-key -T prefix -r -N "Select the pane to the left of the active pane" l select-pane -R
bind-key -T root C-a switch-client -T my-keys
bind-key -T my-keys -N "Reload config" r source-file ~/.config/tmux/tmux.conf \; display-message "~/.config/tmux/tmux.conf reloaded"
bind-key -T my-keys -N "Edit config" e send-keys "nvim ~/.config/tmux/tmux.conf" Enter
bind-key -T my-keys -N "Jump to last window" Space last-window
bind-key -T my-keys -N "Popup terminal" t display-popup -w 80% -h 80% -T "[ TERMINAL ]" -S "fg=#E3A36F" -E
bind-key -T my-keys -N "Popup search and create session" s display-popup -T "[ CREATE/OPEN SESSION ]" -S "fg=#E3A36F" -E "tmuxs"
bind-key -T my-keys -N "Popup search and create window" w display-popup -T "[ CREATE/OPEN WINDOW ]" -S "fg=#E3A36F" -E "dev"
bind-key -T my-keys -N "Jump to directory" j send-keys "cd $(find -L ~/dev ~/projects ~/.config -mindepth 1 -maxdepth 1 -type d | fzf)" Enter
bind-key -T my-keys -N "Search up" / copy-mode \; send-key "?"
bind-key -T my-keys -N "Popup scratchpad" p if-shell -F '#{==:#{session_name},scratchpad}' {
    detach-client
} {
    display-popup -w 80% -h 80% -T "[ SCRATCHPAD ]" -S "fg=#E3A36F" -E "tmux new-session -A -s scratchpad -n home -c ~/"
}
bind-key -T cheatsheets -N "Cheatsheet" c display-popup -T "[ CHEATSHEETS ]" -S "fg=#E3A36F" -E "cht-sh"
bind-key -T cheatsheets -N "Cheatsheet (programming languages)" l display-popup -T "[ CHEATSHEETS ]" -S "fg=#E3A36F" -E "cht-lang"
bind-key -T cheatsheets -N "Cheatsheet (utils)" u display-popup -T "[ CHEATSHEETS ]" -S "fg=#E3A36F" -E "cht-util"
bind-key -T cheatsheets -N "Cheatsheet for vim motions" v display-popup -T "[ CHEATSHEETS ]" -S "fg=#E3A36F" -E "less ~/.config/tmux/docs/vim-motions.md"
bind-key -T my-keys l switch-client -T my-layouts
bind-key -T my-layouts -N "Development layout" d source-file ~/.config/tmux/layouts/dev-layout
